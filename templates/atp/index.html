<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Neon Admin Panel">
    <meta name="author" content="">

    <title>主页</title>


    <link rel="stylesheet" href="{% static 'css/jquery-ui-1.10.3.custom.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/entypo.css' %}">
    <link rel="stylesheet" href="{% static 'css/css.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/neon-core.css' %}">
    <link rel="stylesheet" href="{% static 'css/neon-theme.css' %}">
    <link rel="stylesheet" href="{% static 'css/neon-forms.css' %}">
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">

    <script src="{% static 'js/jquery-1.11.0.min.js' %}"></script>

    <!--[if lt IE 9]>
    <script src="assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->


</head>
<body class="page-body  page-left-in" data-url="http://neon.dev">

<div class="page-container">
    <!-- add class "sidebar-collapsed" to close sidebar by default, "chat-visible" to make chat appear always -->

    <div class="sidebar-menu">
        <header class="logo-env">
            <div class="logo">
                <a href="{% url 'main_platform:index' %}">
                    <h3 style="color: white;font-weight: bold;margin-left: 35px">自动化测试平台</h3>
                </a>
            </div>
        </header>

        <div class="sidebar-user-info">

            <div class="sui-normal">
                <a href="#" class="user-link">
                    <img src="{% static 'picture/touxiang.png' %}" alt="" class="img-circle"
                         style="width: 190px;margin-left: 15px">
                    <span style="text-align: center;padding-top: 200px">你好,欢迎回来,</span>
                    <strong style="text-align: center;margin-top: 5px">{{ user.username }}</strong>
                </a>
            </div>

            <div class="sui-hover inline-links animate-in">
                <!-- You can remove "inline-links" class to make links appear vertically, class "animate-in" will make A elements animateable when click on user profile -->
                <a href="#">
                    <i class="entypo-pencil"></i>
                    New Page
                </a>

                <a href="mailbox.html">
                    <i class="entypo-mail"></i>
                    Inbox
                </a>

                <a href="extra-lockscreen.html">
                    <i class="entypo-lock"></i>
                    Log Off
                </a>

                <span class="close-sui-popup">&times;</span><!-- this is mandatory -->            </div>
        </div>

        <ul id="main-menu" class="">
            <!-- add class "multiple-expanded" to allow multiple submenus to open -->
            <!-- class "auto-inherit-active-class" will automatically add "active" class for parent elements who are marked already with class "active" -->
            <!-- Search Bar -->
            <li class="opened active">
                <a href="{% url 'main_platform:index' %}">
                    <i class="entypo-gauge"></i>
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="{% url 'main_platform:project' %}">
                    <i class="entypo-layout"></i>
                    <span>测试项目</span>
                </a>
            </li>
            <li>
                <a href="{% url 'main_platform:module' %}">
                    <i class="entypo-menu"></i>
                    <span>测试模块</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="glyphicon glyphicon-log-in"></i>
                    <span>接口测试</span>
                </a>
                <ul>
                    <li>
                        <a href="{% url 'main_platform:test_case' %}">
                            <span>接口用例</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'main_platform:test_suite' 0 %}">
                            <span>接口集合</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#">
                    <i class="glyphicon glyphicon-hand-up"></i>
                    <span>UI测试</span>
                </a>
                <ul>
                    <li>
                        <a href="{% url 'selenium_apps:test_case' %}">
                            <span>UI用例</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'selenium_apps:test_suite' 1 %}">
                            <span>UI集合</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#">
                    <i class="entypo-flow-tree"></i>
                    <span>压力测试</span>
                </a>
                <ul>
                    <li>
                        <a href="{% url 'locust_apps:test_case' %}">
                            <span>压力用例</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span>压力集合</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="{% url 'main_platform:test_execute' 'None' %}">
                    <i class="entypo-mail"></i>
                    <span>执行结果</span>
                </a>
            </li>
            <li>
                <a href="{% url 'main_platform:job_execute' %}">
                    <i class="glyphicon glyphicon-time"></i>
                    <span>定时任务</span>
                    <span class="badge badge-secondary">8</span>
                </a>
            </li>
        </ul>

    </div>

    <div class="main-content">
        <div class="row" style="display: flex">
            <div class="col-md-6 col-sm-4 clearfix hidden-xs" style="margin-left: auto">
                <ul class="list-inline links-list pull-right">
                    <li><a href="#">当前在线：{{ user.username }}</a></li>
                    <li class="sep"></li>
                    <li>
                        <a href="{% url 'main_platform:logout' %}">
                            退出登录 <i class="entypo-logout right"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-sm-12">
                <div class="well">
                    <h1>{{ public_data }}</h1>
                    <h3>欢迎来到 <strong>自动化测试平台1.0</strong></h3>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-9">

                <div class="row">
                    <div class="col-sm-6">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <div class="panel-title">用例类型对比图</div>

                                <div class="panel-options">
                                    <a href="#" data-rel="collapse"><i class="entypo-down-open"></i></a>
                                    <a href="#" data-rel="reload"><i class="entypo-arrows-ccw"></i></a>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="main" style="width: 100%;height: 175px"></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <div class="panel-title">最近登录记录</div>

                                <div class="panel-options">
                                    <a href="#" data-rel="collapse"><i class="entypo-down-open"></i></a>
                                    <a href="#" data-rel="reload"><i class="entypo-arrows-ccw"></i></a>
                                </div>
                            </div>
                            <table class="table table-bordered table-responsive" id="UserLog">
                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>姓名</th>
                                    <th>密码</th>
                                    <th>登录时间</th>
                                </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="panel-title">
                            <h4>
                                近5天执行用例数
                            </h4>
                        </div>

                        <div class="panel-options">
                            <a href="#" data-rel="reload"><i class="entypo-arrows-ccw"></i></a>
                        </div>
                    </div>
                    <div id="chart1" style="width: 1200px; height: 300px;"></div>
                </div>

            </div>

            <div class="col-sm-3">

                <div class="tile-stats tile-red">
                    <div class="icon"><i class="entypo-users"></i></div>
                    <div class="num" data-start="0" data-end="{{ project_count }}" data-postfix="" data-duration="1500"
                         data-delay="0">0
                    </div>

                    <h3>项目数量</h3>
                </div>

                <div class="tile-stats tile-green">
                    <div class="icon"><i class="entypo-chart-bar"></i></div>
                    <div class="num" data-start="0" data-end="{{ module_count }}" data-postfix="" data-duration="1500"
                         data-delay="400">0
                    </div>

                    <h3>模块数量</h3>
                </div>

                <div class="tile-stats tile-aqua">
                    <div class="icon"><i class="entypo-mail"></i></div>
                    <div class="num" data-start="0" data-end="{{ api_count }}" data-postfix="" data-duration="1500"
                         data-delay="800">0
                    </div>

                    <h3>接口用例数量</h3>
                </div>

                <div class="tile-stats tile-blue">
                    <div class="icon"><i class="entypo-rss"></i></div>
                    <div class="num" data-start="0" data-end="{{ ui_count }}" data-postfix="" data-duration="1500"
                         data-delay="900">0
                    </div>

                    <h3>UI用例数量</h3>
                </div>

            </div>
        </div>

        <footer class="main">


            Copyright &copy; 2024.zby All rights reserved.

        </footer>
    </div>

    <div id="chat" class="fixed" data-current-user="Art Ramadani" data-order-by-status="1" data-max-chat-history="25">

        <div class="chat-inner">


            <h2 class="chat-header">
                <a href="#" class="chat-close" data-animate="1"><i class="entypo-cancel"></i></a>

                <i class="entypo-users"></i>
                Chat
                <span class="badge badge-success is-hidden">0</span>
            </h2>


            <div class="chat-group" id="group-1">
                <strong>Favorites</strong>

                <a href="#" id="sample-user-123" data-conversation-history="#sample_history"><span
                        class="user-status is-online"></span> <em>Catherine J. Watkins</em></a>
                <a href="#"><span class="user-status is-online"></span> <em>Nicholas R. Walker</em></a>
                <a href="#"><span class="user-status is-busy"></span> <em>Susan J. Best</em></a>
                <a href="#"><span class="user-status is-offline"></span> <em>Brandon S. Young</em></a>
                <a href="#"><span class="user-status is-idle"></span> <em>Fernando G. Olson</em></a>
            </div>


            <div class="chat-group" id="group-2">
                <strong>Work</strong>

                <a href="#"><span class="user-status is-offline"></span> <em>Robert J. Garcia</em></a>
                <a href="#" data-conversation-history="#sample_history_2"><span class="user-status is-offline"></span>
                    <em>Daniel A. Pena</em></a>
                <a href="#"><span class="user-status is-busy"></span> <em>Rodrigo E. Lozano</em></a>
            </div>


            <div class="chat-group" id="group-3">
                <strong>Social</strong>

                <a href="#"><span class="user-status is-busy"></span> <em>Velma G. Pearson</em></a>
                <a href="#"><span class="user-status is-offline"></span> <em>Margaret R. Dedmon</em></a>
                <a href="#"><span class="user-status is-online"></span> <em>Kathleen M. Canales</em></a>
                <a href="#"><span class="user-status is-offline"></span> <em>Tracy J. Rodriguez</em></a>
            </div>

        </div>

        <!-- conversation template -->
        <div class="chat-conversation">

            <div class="conversation-header">
                <a href="#" class="conversation-close"><i class="entypo-cancel"></i></a>

                <span class="user-status"></span>
                <span class="display-name"></span>
                <small></small>
            </div>

            <ul class="conversation-body">
            </ul>

            <div class="chat-textarea">
                <textarea class="form-control autogrow" placeholder="Type your message"></textarea>
            </div>

        </div>

    </div>

    <!-- Chat Histories -->
    <ul class="chat-history" id="sample_history">
        <li>
            <span class="user">Art Ramadani</span>
            <p>Are you here?</p>
            <span class="time">09:00</span>
        </li>

        <li class="opponent">
            <span class="user">Catherine J. Watkins</span>
            <p>This message is pre-queued.</p>
            <span class="time">09:25</span>
        </li>

        <li class="opponent">
            <span class="user">Catherine J. Watkins</span>
            <p>Whohoo!</p>
            <span class="time">09:26</span>
        </li>

        <li class="opponent unread">
            <span class="user">Catherine J. Watkins</span>
            <p>Do you like it?</p>
            <span class="time">09:27</span>
        </li>
    </ul>

    <!-- Chat Histories -->
    <ul class="chat-history" id="sample_history_2">
        <li class="opponent unread">
            <span class="user">Daniel A. Pena</span>
            <p>I am going out.</p>
            <span class="time">08:21</span>
        </li>

        <li class="opponent unread">
            <span class="user">Daniel A. Pena</span>
            <p>Call me when you see this message.</p>
            <span class="time">08:27</span>
        </li>
    </ul>
</div>

<!-- Sample Modal (Default skin) -->
<div class="modal fade" id="sample-modal-dialog-1">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Widget Options - Default Modal</h4>
            </div>

            <div class="modal-body">
                <p>Now residence dashwoods she excellent you. Shade being under his bed her. Much read on as draw.
                    Blessing for ignorant exercise any yourself unpacked. Pleasant horrible but confined day end
                    marriage. Eagerness furniture set preserved far recommend. Did even but nor are most gave hope.
                    Secure active living depend son repair day ladies now.</p>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Sample Modal (Skin inverted) -->
<div class="modal invert fade" id="sample-modal-dialog-2">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Widget Options - Inverted Skin Modal</h4>
            </div>

            <div class="modal-body">
                <p>Now residence dashwoods she excellent you. Shade being under his bed her. Much read on as draw.
                    Blessing for ignorant exercise any yourself unpacked. Pleasant horrible but confined day end
                    marriage. Eagerness furniture set preserved far recommend. Did even but nor are most gave hope.
                    Secure active living depend son repair day ladies now.</p>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Sample Modal (Skin gray) -->
<div class="modal gray fade" id="sample-modal-dialog-3">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Widget Options - Gray Skin Modal</h4>
            </div>

            <div class="modal-body">
                <p>Now residence dashwoods she excellent you. Shade being under his bed her. Much read on as draw.
                    Blessing for ignorant exercise any yourself unpacked. Pleasant horrible but confined day end
                    marriage. Eagerness furniture set preserved far recommend. Did even but nor are most gave hope.
                    Secure active living depend son repair day ladies now.</p>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="{% static 'css/jquery-jvectormap-1.2.2.css' %}">
<link rel="stylesheet" href="{% static 'css/rickshaw.min.css' %}">

<!-- Bottom Scripts -->
<script src="{% static 'js/main-gsap.js' %}"></script>
<script src="{% static 'js/jquery-ui-1.10.3.minimal.min.js' %}"></script>
<script src="{% static 'js/bootstrap.js' %}"></script>
<script src="{% static 'js/joinable.js' %}"></script>
<script src="{% static 'js/resizeable.js' %}"></script>
<script src="{% static 'js/neon-api.js' %}"></script>
<script src="{% static 'js/jquery-jvectormap-1.2.2.min.js' %}"></script>
<script src="{% static 'js/jquery-jvectormap-europe-merc-en.js' %}"></script>
<script src="{% static 'js/jquery-jvectormap-world-mill-en.js' %}"></script>
<script src="{% static 'js/jquery.sparkline.min.js' %}"></script>
<script src="{% static 'js/d3.v3.js' %}"></script>
<script src="{% static 'js/rickshaw.min.js' %}"></script>
<script src="{% static 'js/neon-chat.js' %}"></script>
<script src="{% static 'js/neon-custom.js' %}"></script>
<script src="{% static 'js/neon-demo.js' %}"></script>
<script src="{% static 'js/echarts.min.js' %}"></script>
<script src="{% static 'js/atp/get_job_execute.js' %}"></script>
<script>
    var chartDom = document.getElementById('main');
    var myChart = echarts.init(chartDom);
    var option;

    option = {
        tooltip: {
            trigger: 'item'
        },
        legend: {
            top: '5%',
            left: 'center'
        },
        series: [
            {
                type: 'pie',
                radius: ['40%', '70%'],
                avoidLabelOverlap: false,
                itemStyle: {
                    borderRadius: 10,
                    borderColor: '#fff',
                    borderWidth: 2
                },
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: 40,
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: {{ count_data|safe }}{#直接调用，safe是不进行转义#}
            }
        ]
    };
    option && myChart.setOption(option);
</script>
<script>
    var table = document.getElementById("UserLog"); // 获取要操作的table元素
    var tbody = document.createElement("tbody"); // 创建新的tbody元素
    var dataArray = {{ userlog_list|safe }};

    for (let i = 0; i < dataArray.length; i++) {
        var row = document.createElement("tr"); // 创建新的tr元素

        var cellData = document.createTextNode(i + 1);
        var cellData0 = document.createTextNode(dataArray[i][0]);
        var cellData1 = document.createTextNode(dataArray[i][1]);
        var cellData2 = document.createTextNode(dataArray[i][2]);
        var cell = document.createElement("td");
        var cell0 = document.createElement("td");
        var cell1 = document.createElement("td");
        var cell2 = document.createElement("td");
        cell.appendChild(cellData); // 将文本节点添加为td的子节点
        cell0.appendChild(cellData0); // 将文本节点添加为td的子节点
        cell1.appendChild(cellData1); // 将文本节点添加为td的子节点
        cell2.appendChild(cellData2); // 将文本节点添加为td的子节点
        row.appendChild(cell); // 将td添加为tr的子节点
        row.appendChild(cell0); // 将td添加为tr的子节点
        row.appendChild(cell1); // 将td添加为tr的子节点
        row.appendChild(cell2); // 将td添加为tr的子节点

        tbody.appendChild(row); // 将tr添加为tbody的子节点
    }

    table.appendChild(tbody); // 将tbody添加为table的子节点
</script>
<script>
    var myChart = echarts.init(document.getElementById('chart1'));
    var option = {
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            },
            formatter: function (params) {
                var res = params[0].name;
                for (var i = 0, l = params.length; i < l; i++) {
                    res += '<br/>' + params[i].seriesName + ' : ' + params[i].value;
                }
                return res;
            }
        },
        legend: {
            data: ['接口用例', '接口集合', 'UI用例', 'UI用例集合']
        },
        xAxis: {
            type: 'category',
            data: {{ five_days|safe }}
        },
        yAxis: {
            type: 'value'
        },
        series: [
            {
                name: '接口用例',
                type: 'bar',
                stack: 'total',
                label: {
                    show: true,
                    position: 'inside'
                },
                barWidth: 100,
                barGap: '-100%',
                data: {{ te|safe }}
            },
            {
                name: '接口集合',
                type: 'bar',
                stack: 'total',
                label: {
                    show: true,
                    position: 'inside'
                },
                data: {{ tse|safe }}
            },
            {
                name: 'UI用例',
                type: 'bar',
                stack: 'total',
                label: {
                    show: true,
                    position: 'inside'
                },
                data: {{ uite|safe }}
            },
            {
                name: 'UI用例集合',
                type: 'bar',
                stack: 'total',
                label: {
                    show: true,
                    position: 'inside'
                },
                data: {{ uitse|safe }}
            }
        ]
    };

    myChart.setOption(option);
</script>
</body>
</html>